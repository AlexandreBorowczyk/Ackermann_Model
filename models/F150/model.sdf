<!-- rosrun gazebo_ros spawn_model -model F-150 -sdf -file /home/bigb/gazebo_f150_ws/src/gazebo_f150/models/F150/model.sdf -->


<?xml version="1.0" ?>
<sdf version="1.5">
  <model name="box">
    <pose>0 0 0 0 0 0</pose>
    <static>false</static>

    <link name="chassis">
    <pose>0 0 0.84451 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>904</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>5584</iyy>
          <iyz>0</iyz>
          <izz>5900</izz>
        </inertia>
        <mass>2260.0</mass>
      </inertial>
      <collision name="collision_chassis_front">
        <pose>0.935 0 0.15 0 0 0</pose>
        <geometry>
          <box>
            <size>3.370 1.80 1.56</size>
          </box>
        </geometry>
      </collision>
      <collision name="collision_chassis_back">
        <pose>-1.770 0 -0.1035 0 0 0</pose>
        <geometry>
          <box>
            <size>2.035 1.80 1.053</size>
          </box>
        </geometry>
      </collision>
      <visual name="visual_chassis_base">
        <geometry>
          <mesh>
            <uri>model://F150/meshes/F150.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

<!-- Start Front Right Wheel -->
    <link name="front_right_wheel">
    <pose>1.953 -0.8665 0.445 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>2</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>3.46</iyy>
          <iyz>0</iyz>
          <izz>2</izz>
        </inertia>
        <mass>35.0</mass>
      </inertial>

      <collision name="front_right_wheel_collision">
      <pose>0 0 0 1.57079633 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.445</radius>
            <length>0.297</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0.7</mu>
              <mu2>0.7</mu2>
            </ode>
          </friction>
        </surface>
      </collision>

      <visual name="front_right_wheel_visual">
      <pose>0 0 0 0 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://F150/meshes/wheel.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="front_right_wheel_joint" type="revolute2">
      <parent>chassis</parent>
      <child>front_right_wheel</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
      <axis2>
        <xyz>0 1 0</xyz>
      </axis2>
    </joint>
<!-- End Front Right Wheel -->

<!-- Front Left Wheel -->
    <link name="front_left_wheel">
    <pose>1.953 0.8665 0.445 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>2</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>3.46</iyy>
          <iyz>0</iyz>
          <izz>2</izz>
        </inertia>
        <mass>35.0</mass>
      </inertial>

      <collision name="front_left_wheel_collision">
      <pose>0 0 0 1.57079633 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.445</radius>
            <length>0.297</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0.7</mu>
              <mu2>0.7</mu2>
            </ode>
          </friction>
        </surface>
      </collision>

      <visual name="front_left_wheel_visual">
      <pose>0 0 0 0 0 3.1416</pose>
        <geometry>
          <mesh>
            <uri>model://F150/meshes/wheel.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="front_left_wheel_joint" type="revolute2">
      <parent>chassis</parent>
      <child>front_left_wheel</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 0 1</xyz>
      </axis>
      <axis2>
        <xyz>0 1 0</xyz>
      </axis2>
    </joint>
<!-- End Front Left Wheel -->

<!-- Start Rear Right Wheel -->
    <link name="rear_right_wheel">
    <pose>-1.698 -0.8665 0.445 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>2</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>3.46</iyy>
          <iyz>0</iyz>
          <izz>2</izz>
        </inertia>
        <mass>35.0</mass>
      </inertial>

      <collision name="rear_right_wheel_collision">
      <pose>0 0 0 1.57079633 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.445</radius>
            <length>0.297</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0.7</mu>
              <mu2>0.7</mu2>
            </ode>
          </friction>
        </surface>
      </collision>

      <visual name="rear_right_wheel_visual">
      <pose>0 0 0 0 0 0</pose>
        <geometry>
          <mesh>
            <uri>model://F150/meshes/wheel.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="rear_right_wheel_joint" type="revolute">
      <parent>chassis</parent>
      <child>rear_right_wheel</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>
<!-- End Rear Right Wheel -->

<!-- Start Rear Left Wheel -->
    <link name="rear_left_wheel">
    <pose>-1.698 0.8665 0.445 0 0 0</pose>
      <inertial>
        <inertia>
          <ixx>2</ixx>
          <ixy>0</ixy>
          <ixz>0</ixz>
          <iyy>3.46</iyy>
          <iyz>0</iyz>
          <izz>2</izz>
        </inertia>
        <mass>35.0</mass>
      </inertial>

      <collision name="rear_left_wheel_collision">
      <pose>0 0 0 1.57079633 0 0</pose>
        <geometry>
          <cylinder>
            <radius>0.445</radius>
            <length>0.297</length>
          </cylinder>
        </geometry>
        <surface>
          <friction>
            <ode>
              <mu>0.7</mu>
              <mu2>0.7</mu2>
            </ode>
          </friction>
        </surface>
      </collision>

      <visual name="rear_left_wheel_visual">
      <pose>0 0 0 0 0 3.1416</pose>
        <geometry>
          <mesh>
            <uri>model://F150/meshes/wheel.dae</uri>
          </mesh>
        </geometry>
      </visual>
    </link>

    <joint name="rear_left_wheel_joint" type="revolute">
      <parent>chassis</parent>
      <child>rear_left_wheel</child>
      <pose>0 0 0 0 0 0</pose>
      <axis>
        <xyz>0 1 0</xyz>
      </axis>
    </joint>
<!-- End Rear Left Wheel -->
<plugin name="ackermann_controller" filename="libgazebo_f150.so">
  <alwaysOn>true</alwaysOn>
  <update>100</update>
  <updateRate>100.0</updateRate>

  <steer_right>front_right_wheel_joint</steer_right>
  <steer_left>front_left_wheel_joint</steer_left>

  <steer_P>1250</steer_P>
  <steer_I>10</steer_I>
  <steer_D>300</steer_D>
  <steer_LIM>150</steer_LIM>
  <vel_P>200</vel_P>
  <vel_I>1</vel_I>
  <vel_D>1</vel_D>
  <vel_LIM>25</vel_LIM>

  <max_steering>60</max_steering>
  <wheelbase>3.651</wheelbase>
  <wheelspread>1.733</wheelspread>
</plugin>

<plugin name="ground_truth" filename="libgazebo_ros_p3d.so">
  <frameName>world</frameName>
  <bodyName>chassis</bodyName>
  <topicName>f150</topicName>
  <updateRate>30.0</updateRate>
</plugin>

</model>
</sdf>
